---
import {getCollection, getEntryBySlug} from "astro:content"
import Layout from "../../layouts/Layout.astro"


const {slug} = Astro.params
const post = await getEntryBySlug("work", slug as string)

if (!post) {
    return Astro.redirect("/404")
}

const projects = await getCollection("work")
const remainingPosts = projects.filter(p => p.slug !== post.slug)
const relatedPosts = remainingPosts.filter(p =>
    p.data.tags.some(category => post.data.tags.includes(category)),
)

const {Content, headings} = await post.render()
---

<Layout title={post.data.title}>
  <Content />
</Layout>


